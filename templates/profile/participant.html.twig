{% extends 'base.html.twig' %}

{% block title %}Mon profil — Art Connect{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {% include 'profile/_styles.html.twig' %}
{% endblock %}

{% block body %}
<section class="fo-profile-shell">
    <div class="fo-profile-header">
        <div>
            <h1 class="fo-profile-title"><i class="fas fa-user"></i> Mon profil</h1>
            <p class="fo-profile-subtitle">Gérez vos informations personnelles et votre image.</p>
        </div>
    </div>

    <article class="fo-profile-card">
        <div class="fo-profile-card-body">
            <div class="fo-profile-top">
                <div class="fo-profile-identity">
                    {% set initials = (app.user.prenom|first|default('U') ~ app.user.nom|first|default('S'))|upper %}
                    <div class="fo-profile-avatar">
                        {% if app.user.profileImageUrl %}
                            <img src="{{ app.user.profileImageUrl }}" alt="Photo de profil">
                        {% else %}
                            {{ initials }}
                        {% endif %}
                    </div>
                    <div>
                        <span class="fo-profile-role">Participant</span>
                        <p class="fo-profile-name">{{ app.user.prenom }} {{ app.user.nom }}</p>
                        <p class="fo-profile-age">
                            {% if app.user.dateNaissance %}
                                {{ app.user.age }} ans • Né(e) le {{ app.user.dateNaissance|date('d/m/Y') }}
                            {% else %}
                                Date de naissance non renseignée
                            {% endif %}
                        </p>
                    </div>
                </div>

                <div class="fo-profile-actions">
                    <a href="{{ path('participant_profile_edit') }}" class="btn btn-primary">
                        <i class="fas fa-pen me-1"></i> Modifier
                    </a>
                </div>
            </div>

            <div class="fo-profile-grid">
                <div class="fo-profile-meta">
                    <p class="label">Email</p>
                    <p class="value">{{ app.user.email }}</p>
                </div>
                <div class="fo-profile-meta">
                    <p class="label">Téléphone</p>
                    <p class="value">{{ app.user.telephone ?: 'Non renseigné' }}</p>
                </div>
                <div class="fo-profile-meta">
                    <p class="label">Date de naissance</p>
                    <p class="value">{{ app.user.dateNaissance ? app.user.dateNaissance|date('d/m/Y') : 'Non renseignée' }}</p>
                </div>
                <div class="fo-profile-meta">
                    <p class="label">Image de profil</p>
                    <p class="value text-truncate">{{ app.user.profileImageUrl ?: 'Image par défaut (initiales)' }}</p>
                </div>
            </div>

            <div class="fo-profile-note">
                <i class="fas fa-circle-info me-1"></i>
                {% if not app.user.dateNaissance %}
                    Vous pouvez renseigner votre date de naissance une seule fois.
                {% else %}
                    Votre date de naissance est verrouillée après la première saisie.
                {% endif %}
            </div>
        </div>
    </article>
</section>
{% endblock %}
    </div>
</div>
{% endblock %}
