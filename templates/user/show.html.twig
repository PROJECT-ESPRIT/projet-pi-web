{% extends 'base.html.twig' %}

{% block title %}Utilisateur{% endblock %}

{% block body %}
    <h1>Utilisateur</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ user.id }}</td>
            </tr>
            <tr>
                <th>Email</th>
                <td>{{ user.email }}</td>
            </tr>
            <tr>
                <th>Roles</th>
                <td>
                    {% for role in user.roles %}
                        {% set roleLabel = role|replace({'ROLE_': ''}) %}
                        {% set roleClass = role == 'ROLE_ADMIN'
                            ? 'bg-danger'
                            : (role == 'ROLE_ARTISTE'
                                ? 'bg-info text-dark'
                                : (role == 'ROLE_PARTICIPANT'
                                    ? 'bg-primary'
                                    : 'bg-secondary')) %}
                        <span class="badge {{ roleClass }}">{{ roleLabel }}</span>
                    {% endfor %}
                </td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ user.nom }}</td>
            </tr>
            <tr>
                <th>Prenom</th>
                <td>{{ user.prenom }}</td>
            </tr>
            <tr>
                <th>Telephone</th>
                <td>{{ user.telephone }}</td>
            </tr>
            <tr>
                <th>Date de creation</th>
                <td>{{ user.createdAt ? user.createdAt|date('Y-m-d H:i:s') : '' }}</td>
            </tr>
            <tr>
                <th>Niveau fidelite</th>
                <td>
                    {% set level = user.loyaltyLevel|default('BRONZE') %}
                    {% set levelClass = level == 'GOLD' ? 'bg-warning text-dark' : (level == 'SILVER' ? 'bg-secondary' : 'bg-dark') %}
                    <span class="badge {{ levelClass }}">{{ level }}</span>
                </td>
            </tr>
            <tr>
                <th>Points fidelite</th>
                <td>{{ user.points|default(0) }}</td>
            </tr>
        </tbody>
    </table>

    <div class="mt-3">
        <a href="{{ path('app_user_index') }}" class="btn btn-secondary">Retour</a>
        <a href="{{ path('app_user_edit', {'id': user.id}) }}" class="btn btn-outline-primary">Editer</a>
        {{ include('user/_delete_form.html.twig') }}
    </div>
{% endblock %}
